# Starrim-Lifecycle-KTX
I'm Starrim, a 16-year-old(in 2021) student in Chinese. My English isn't very well so the document may not be very good. Don't care too much!(smile)<br>
This extension is my first public project. I will take the high school entrance exam in June, 2021 so I may not have enough time to fix bugs and improve code.
<br> **Everyone** can fork this extension! 
<br> When you find any bugs or want to give me any suggestions, Welcome send me **E-mall** or **discuss** here!
<br>

我是Starrim，一个16岁（2021年）的中国学生！我的英语太菜了所以有的文档可能写的不是很好。但是不要太注意啦！（被打）
<br>这个扩展是我的一次个公开项目尝试。因为6月份要中考了所以可能不会有足够的时间去维护这个项目。但是大家都可以 Fork 这个项目来用，也可以帮助我改进这个项目鸭！
<br>如果在用的过程中遇到了啥问题可以给我 **发邮件** 或者 **在这里的 Issues 或者 Discussions 讨论**，只要看到我都会处理的！
> E-mall address: **starrim0725@163.com**

## 1.Introduction
This is an extension of Android Lifecycle, which can help developers use Lifecycle easily. 
<br>It will reduce most of Boilerplate Code in your Kotlin Project.
<br>For example, This is the code to use ViewBinding in your Activity:
```kotlin
    private lateinit var binding: ResultProfileBinding

    override fun onCreate(savedInstanceState: Bundle) {
        super.onCreate(savedInstanceState)
        binding = ResultProfileBinding.inflate(layoutInflater)
        val view = binding.root
        setContentView(view)
    }
```

But after using this extension, you can only use **ONE** property to use ViewBinding:
```kotlin
    val binding by viewBinding<ResultProfileBinding>()
```
Also you needn't set ContentView in your Activity. All views can be use now!
```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding.helloText.text = "Success"
    }
```
Most of functions in this extension are **only use ONE property**！
## 1.介绍
这是一个针对 Android Lifecycle 的扩展，可以帮助开发者更轻松、简洁地使用 Lifecycle组件。
<br>它能够减少绝大多数样板代码的使用
<br>例如, 这是一段来自官方的 ViewBinding 使用实例代码:
```kotlin
    private lateinit var binding: ResultProfileBinding
    override fun onCreate(savedInstanceState: Bundle) {
        super.onCreate(savedInstanceState)
        binding = ResultProfileBinding.inflate(layoutInflater)
        val view = binding.root
        setContentView(view)
    }
```
但使用了这里的扩展方法之后，只需要一行参数委托声明就可以使用 ViewBinding了:
```kotlin
    val binding by viewBinding<ResultProfileBinding>()
```
而且你可以省去 setContentView 方法的调用，一切视图都能够直接调用了。一切都交给一个属性委托来搞定！
```kotlin
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding.helloText.text = "Success"
    }
```
#### 本扩展的**绝大多数方法**都像这样，**只需要一行代码**解决！

## 2.Usage
**Pay Attention! Only Kotlin project can use the extensions!** (Sorry Java developer!!)<br>
If you want to use Lifecycle Starrim-Extensions, be sure that you're using **Kotlin, AndroidX and AppCompat**(Lifecycle require these support) and **configure Lifecycle features** according to Google Documents.<br>
Although these samples are in Activity, **functions of Fragment are similar to them!**
### View Binding
```kotlin
// Top Functions, they're similar.
fun <VB:ViewBinding> AppCompatActivity.viewBinding(clazz: Class<VB>)
inline fun <reified VB:ViewBinding> AppCompatActivity.viewBinding()
```
Usage:
```kotlin
val binding by viewBinding<ActivityMainBinding>()
```
Sample:
```kotlin
class MainActivity : AppCompatActivity() {

    // There's a class named ActivityMainBinding automatically generated by Androud ViewBinding.
    // Set Binding property such as here:
    private val binding by viewBinding<ActivityMainBinding>()
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        //Use all Views here.
    }

}
```
Pay attention! **Don't use this binding in the function** *AppCompatActivity.OnDestroy()*

### ViewModel with LifecycleObserver
>Your ViewModel **must extend ViewModel and implement LifecycleObserver or DefaultLifecycleBoserver**
```kotlin
// For AppCompatActivity
fun <VM> AppCompatActivity.viewModelWithObserver(vm:Class<VM>) where VM: ViewModel, VM:LifecycleObserver
inline fun <reified VM> AppCompatActivity.viewModelWithObserver() where VM: ViewModel, VM:LifecycleObserver

//For androidx Fragment
fun <VM> Fragment.viewModelWithObserver(vm:Class<VM>) where VM: ViewModel, VM:LifecycleObserver
inline fun <reified VM> Fragment.viewModelWithObserver() where VM: ViewModel, VM:LifecycleObserver
```
Usage:
```kotlin
val model by viewModelWithObserver<XXXViewModel>()
```
Sample:
```kotlin
// Your ViewModel shoud be similar to that:
class MainViewModel: ViewModel(), LifecycleObserver {//......}

class MainActivity : AppCompatActivity() {
    // Set ViewModel with LivecycleObserver here as following:
    private val model by viewModelWithObserver<MainViewModel>()
    // Then you can use model everywhere in this Activity.
}
```

### ViewModel Only
> which usage is similar to that of ViewModel with Observer
```kotlin
// For AppCompatActivity
fun <VM:ViewModel> AppCompatActivity.viewModel(vm: Class<VM>)
inline fun <reified VM:ViewModel> AppCompatActivity.viewModel()

// For androidx Fragment
fun <VM:ViewModel> Fragment.viewModel(vm: Class<VM>)
inline fun <reified VM:ViewModel> Fragment.viewModel()
```
Usage:
```kotlin
val model by viewModel<XXXViewModel>()
```
Sample:
```kotlin
// Your ViewModel shoud be similar to that:
class MainViewModel: ViewModel() {//......}

class MainActivity : AppCompatActivity() {
    // Set ViewModel with LivecycleObserver here as following:
    private val model by viewModel<MainViewModel>()
    // Then you can use model everywhere in this Activity.
}
```
